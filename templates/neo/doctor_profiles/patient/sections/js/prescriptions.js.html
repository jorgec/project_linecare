<script type="text/javascript">
    var modalPrescriptionDetail = $("#modalPrescriptionDetail");
    var modalAddMedicine = $("#modalAddMedicine");
    var modalDismissedPrescriptions = $("#modalDismissedPrescriptions");
    var id_generic_name = $("#id_generic_name");

    $(document).ready(function () {
        modalPrescriptionDetail.popup({
            autozindex: true,
            scrolllock: true
        });
        modalDismissedPrescriptions.popup({
            autozindex: true,
            scrolllock: true
        });
        modalAddMedicine.popup({
            autozindex: true,
            scrolllock: true
        });

        id_generic_name.on('keyup', function(e){
            e.preventDefault();
            var s = $(this).val();
            if(s.length >=4){
                loadGenerics(s);
            }
        });


    });

    function loadGenerics(s){
        var url = "{% url 'api_public_generics_list' %}?s=" + s;
        $.get(url)
            .done(function(result){
                $("#generics-list-container").loadTemplate($("#generics-list-template"), result);
            });
    }

</script>