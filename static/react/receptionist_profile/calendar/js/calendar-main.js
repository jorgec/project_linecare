(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,n){e.exports=n(438)},438:function(e,t,n){"use strict";n.r(t);n(183);var a=n(1),o=n.n(a),r=n(65),c=n.n(r),l=n(82),i=n(83),d=n(85),s=n(84),u=n(86),m=n(11),h=n(12),p=n(176),f=n(180),g=n(39),b=n(40),v=n.n(b),S=n(32),y=n.n(S),w=(n(406),n(13)),k=n.n(w),x=n(52),E=(n(418),n(177)),D=n.n(E),C=(n(436),"");function M(){var e=Object(m.a)(["\n  height: 100%;\n  width: 100%;\n  top: 0;\n  position: absolute;\n"]);return M=function(){return e},e}function O(){var e=Object(m.a)(["\n  padding: 2px 16px;\n  border-top: 1px solid rgba(0, 0, 0, 0.3);\n  color: #4a4a4a;\n  padding: 1rem 1rem;\n"]);return O=function(){return e},e}function N(){var e=Object(m.a)(["\n  padding: 1rem 1rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  #profileList {\n    width: 100%;\n  }\n"]);return N=function(){return e},e}function j(){var e=Object(m.a)(["\n  padding: 1rem 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\n  color: #4a4a4a;\n"]);return j=function(){return e},e}function Y(){var e=Object(m.a)(["\n  position: relative;\n  background-color: #fefefe;\n  margin: auto;\n  padding: 0;\n  border: 1px solid #888;\n  width: 90%;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  -webkit-animation-name: animatetop;\n  -webkit-animation-duration: 0.4s;\n  animation-name: animatetop;\n  animation-duration: 0.4s;\n  /* Add Animation */\n  @-webkit-keyframes animatetop {\n    from {\n      top: -300px;\n      opacity: 0;\n    }\n    to {\n      top: 0;\n      opacity: 1;\n    }\n  }\n\n  @keyframes animatetop {\n    from {\n      top: -300px;\n      opacity: 0;\n    }\n    to {\n      top: 0;\n      opacity: 1;\n    }\n  }\n  @media (min-width: 500px) {\n    width: 60%;\n  }\n"]);return Y=function(){return e},e}function T(){var e=Object(m.a)(["\n  display: ","; /* Hidden by default */\n  position: fixed; /* Stay in place */\n  z-index: 500; /* Sit on top */\n  padding-top: 100px; /* Location of the box */\n  left: 0;\n  top: 0;\n  width: 100%; /* Full width */\n  height: 100%; /* Full height */\n  overflow: auto; /* Enable scroll if needed */\n  background-color: rgb(0, 0, 0); /* Fallback color */\n  background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */\n  .close {\n    color: rgba(0, 0, 0, 1);\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: rgba(0, 0, 0, 0.4);\n    text-decoration: none;\n    cursor: pointer;\n  }\n  @media (min-width: 500px) {\n    padding-top: 200px; /* Location of the box */\n  }\n"]);return T=function(){return e},e}var _=h.a.div(T(),function(e){return e.modalOpen?"block":"none"}),A=h.a.div(Y()),B=h.a.div(j()),I=h.a.div(N()),F=h.a.div(O()),R=h.a.div(M()),L=function(e){var t=e.showModal,n=e.toggleModal,a=e.actualDelete,r=e.loadingDelRes;return o.a.createElement(_,{className:"modal",modalOpen:t},o.a.createElement(R,{onClick:n}),o.a.createElement(A,{className:"modal-content"},o.a.createElement(B,{className:"modal-header"},o.a.createElement("h6",null,"Are you sure you want to delete this schedule?"),o.a.createElement("span",{onClick:n,className:"close"},"\xd7")),o.a.createElement(I,{className:"modal-body"},e.children),o.a.createElement(F,{className:"modal-footer"},o.a.createElement("button",{disabled:r,onClick:a,className:"btn btn-danger",href:"#!"},"Delet","".concat(r?"ing":"e")),o.a.createElement("a",{onClick:n,href:"#!",className:"btn btn-secondary"},"Cancel"))))},P=[{name:"Monday",key:"checkBox1",label:"Monday"},{name:"Tuesday",key:"checkBox2",label:"Tuesday"},{name:"Wednesday",key:"checkBox3",label:"Wednesday"},{name:"Thursday",key:"checkBox4",label:"Thursday"},{name:"Friday",key:"checkBox5",label:"Friday"},{name:"Saturday",key:"checkBox6",label:"Saturday"},{name:"Sunday",key:"checkBox7",label:"Sunday"}],H=function(e){var t=e.type,n=void 0===t?"checkbox":t,a=e.name,r=e.checked,c=void 0!==r&&r,l=e.onChange;return o.a.createElement("input",{className:"form-check-input",type:n,name:a,checked:c,onChange:l})};function q(){var e=Object(m.a)(["\n  height: 100%;\n  width: 100%;\n  top: 0;\n  position: absolute;\n"]);return q=function(){return e},e}function V(){var e=Object(m.a)(["\n  padding: 2px 16px;\n  border-top: 1px solid rgba(0, 0, 0, 0.3);\n  color: #4a4a4a;\n  padding: 1rem 1rem;\n"]);return V=function(){return e},e}function z(){var e=Object(m.a)(["\n  padding: 1rem 1rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  #profileList {\n    width: 100%;\n  }\n"]);return z=function(){return e},e}function W(){var e=Object(m.a)(["\n  padding: 1rem 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\n  color: #4a4a4a;\n"]);return W=function(){return e},e}function J(){var e=Object(m.a)(["\n  position: relative;\n  background-color: #fefefe;\n  margin: auto;\n  padding: 0;\n  border: 1px solid #888;\n  width: 90%;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  -webkit-animation-name: animatetop;\n  -webkit-animation-duration: 0.4s;\n  animation-name: animatetop;\n  animation-duration: 0.4s;\n  /* Add Animation */\n  @-webkit-keyframes animatetop {\n    from {\n      top: -300px;\n      opacity: 0;\n    }\n    to {\n      top: 0;\n      opacity: 1;\n    }\n  }\n\n  @keyframes animatetop {\n    from {\n      top: -300px;\n      opacity: 0;\n    }\n    to {\n      top: 0;\n      opacity: 1;\n    }\n  }\n  @media (min-width: 500px) {\n    width: 60%;\n  }\n"]);return J=function(){return e},e}function X(){var e=Object(m.a)(["\n  display: ","; /* Hidden by default */\n  position: fixed; /* Stay in place */\n  z-index: 500; /* Sit on top */\n  padding-top: 100px; /* Location of the box */\n  left: 0;\n  top: 0;\n  width: 100%; /* Full width */\n  height: 100%; /* Full height */\n  overflow: auto; /* Enable scroll if needed */\n  background-color: rgb(0, 0, 0); /* Fallback color */\n  background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */\n  .close {\n    color: rgba(0, 0, 0, 1);\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: rgba(0, 0, 0, 0.4);\n    text-decoration: none;\n    cursor: pointer;\n  }\n  @media (min-width: 500px) {\n    padding-top: 100px; /* Location of the box */\n  }\n"]);return X=function(){return e},e}var G=h.a.div(X(),function(e){return e.modalOpen?"block":"none"}),K=h.a.div(J()),Q=h.a.div(W()),U=h.a.div(z()),Z=h.a.div(V()),$=h.a.div(q()),ee=function(e){var t=e.showAddScheduleModal,n=e.toggleAddScheduleModal,a=e.handleScheduleSubmit,r=e.loadingSchedRes;return o.a.createElement(G,{className:"modal",modalOpen:t},o.a.createElement($,{onClick:n}),o.a.createElement(K,{className:"modal-content"},o.a.createElement(Q,{className:"modal-header"},o.a.createElement("h6",null,"Create new schedule"),o.a.createElement("span",{onClick:n,className:"close"},"\xd7")),o.a.createElement(U,{className:"modal-body"},e.children),o.a.createElement(Z,{className:"modal-footer"},o.a.createElement("button",{onClick:a,className:"btn btn-success",href:"#!",disabled:r},"Sav","".concat(r?"ing":"e")),o.a.createElement("a",{onClick:n,href:"#!",className:"btn btn-secondary"},"Cancel"))))};v.a.defaults.xsrfCookieName="csrftoken",v.a.defaults.xsrfHeaderName="X-CSRFToken";var te=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={events:null,loading:!1,error:null,fullDate:null,monthViewSelected:!0,showModal:!1,doctorId:null,scheduleId:null,showAddScheduleModal:!1,checkedItems:new Map,startTime:"",endTime:"",startDate:k()(Date.now()).format("YYYY-MM-DD"),endDate:k()(Date.now()).format("YYYY-MM-DD"),loadingSchedRes:!1,loadingDelRes:!1},n.getEvents=function(){var e=new Date,t=e.getMonth()+1,a=e.getFullYear(),o=Object(g.a)(n);y.a.start(),n.setState({loading:!0}),v.a.get("".concat(C,"/doctor/api/v1/private/calendar/month?doctor_id=").concat(window.appContext.doctor_id,"&month=").concat(t,"&year=").concat(a)).then(function(e){var t=e.data;o.setState({events:t}),y.a.done(),o.setState({loading:!1})}).catch(function(e){var t=e.response.data;o.setState({error:t}),y.a.done()}).then(function(){})},n.successCreatedSchedule=function(){return x.toast.success("Successfully created new Schedule!",{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.errorCreatedSchedule=function(e){return x.toast.error("".concat(e),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.successDeleteSchedule=function(){return x.toast.success("Successfully deleted!",{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.errorDeleteSchedule=function(e){return x.toast.error("".concat(e.data),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.getCurrentDate=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,o=e.getFullYear();t<10&&(t="0"+t),a<10&&(a="0"+a);var r=e=a+"/"+t+"/"+o;n.setState({fullDate:r})},n.handlePrev=function(){var e=k()(n.state.fullDate).subtract(1,"months");n.setState({fullDate:e});var t=k()(n.state.fullDate).month()+1,a=k()(n.state.fullDate).year(),o=Object(g.a)(n);y.a.start(),n.setState({loading:!0}),v.a.get("".concat(C,"/doctor/api/v1/private/calendar/month?doctor_id=").concat(window.appContext.doctor_id,"&month=").concat(t,"&year=").concat(a)).then(function(e){var t=e.data;o.setState({events:t}),y.a.done(),o.setState({loading:!1})}).catch(function(e){var t=e.response.data;o.setState({error:t}),y.a.done()}).then(function(){})},n.handleNext=function(){var e=k()(n.state.fullDate).add(1,"months");n.setState({fullDate:e});var t=k()(n.state.fullDate).month()+1,a=k()(n.state.fullDate).year(),o=Object(g.a)(n);y.a.start(),n.setState({loading:!0}),v.a.get("".concat(C,"/doctor/api/v1/private/calendar/month?doctor_id=").concat(window.appContext.doctor_id,"&month=").concat(t,"&year=").concat(a)).then(function(e){var t=e.data;o.setState({events:t}),y.a.done(),o.setState({loading:!1})}).catch(function(e){var t=e.response.data;o.setState({error:t}),y.a.done()}).then(function(){})},n.handleDelete=function(e,t,a){console.log(e,t,a),n.setState({doctorId:e,scheduleId:t}),n.toggleModal()},n.toggleModal=function(){n.setState(function(e){return{showModal:!e.showModal}})},n.toggleAddScheduleModal=function(){n.setState(function(e){return{showAddScheduleModal:!e.showAddScheduleModal}})},n.actualDelete=function(){var e=Object(g.a)(n);n.setState({loadingDelRes:!0}),v.a.post("".concat(C,"/doctor/api/v1/private/doctor/schedule_day/delete"),{doctor_id:n.state.doctorId,schedule_day_id:n.state.scheduleId}).then(function(t){200===t.status?(e.successDeleteSchedule(),e.toggleModal(),e.getCurrentDate(),e.setState({loadingDelRes:!1}),e.getEvents()):console.log(t)}).catch(function(t){e.errorDeleteSchedule(t.response),e.toggleModal(),e.setState({loadingDelRes:!1})})},n.handleScheduleSubmit=function(){var e=n.state,t=e.startTime,a=e.endTime,o=e.startDate,r=e.endDate,c=[],l=!0,i=!1,d=void 0;try{for(var s,u=n.state.checkedItems.entries()[Symbol.iterator]();!(l=(s=u.next()).done);l=!0){var m=s.value,h=Object(f.a)(m,2),p=h[0];h[1]&&c.push(p)}}catch(y){i=!0,d=y}finally{try{l||null==u.return||u.return()}finally{if(i)throw d}}var b=c.join("^"),S=Object(g.a)(n);n.setState({loadingSchedRes:!0}),v.a.post("".concat(C,"/doctor/api/v1/private/doctor/schedule/create"),{start_time:t,end_time:a,start_date:o,end_date:r,doctor_id:parseInt(window.appContext.doctor_id),medical_institution_id:1,days:b}).then(function(e){201===e.status&&(S.successCreatedSchedule(),S.toggleAddScheduleModal(),S.getCurrentDate(),S.setState({checkedItems:new Map,startTime:"",endTime:"",startDate:k()(Date.now()).format("YYYY-MM-DD"),endDate:k()(Date.now()).format("YYYY-MM-DD"),loadingSchedRes:!1}),S.getEvents())}).catch(function(e){if(e){S.errorCreatedSchedule("Schedule conflict detected"),S.toggleAddScheduleModal(),S.setState({loadingSchedRes:!1})}})},n.handleStartTimeChange=function(e){var t=k()(e.target.valueAsDate).utc().format("hh:mm a").toString();n.setState({startTime:t})},n.handleEndTimeChange=function(e){var t=k()(e.target.valueAsDate).utc().format("hh:mm a").toString();n.setState({endTime:t})},n.handleChange=function(e){n.setState(Object(p.a)({},e.target.name,k()(e.target.value).format("YYYY-MM-DD")))},n.handleDayChange=function(e){var t=e.target.name,a=e.target.checked;n.setState(function(e){return{checkedItems:e.checkedItems.set(t,a)}})},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getEvents(),this.getCurrentDate(),document.querySelector(".fc-view").classList.contains("fc-month-view")?this.setState({monthViewSelected:!0}):this.setState({monthViewSelected:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.error,r=t.fullDate,c=t.events,l=t.showModal,i=t.showAddScheduleModal,d=t.loadingSchedRes,s=t.loadingDelRes,u=this;return o.a.createElement("div",null,o.a.createElement(x.ToastContainer,{transition:x.Slide,position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!1,pauseOnHover:!1}),a?o.a.createElement("h6",{className:"text-center"},o.a.createElement("em",null,a)):n?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(L,{showModal:l,toggleModal:this.toggleModal,actualDelete:this.actualDelete,loadingDelRes:s},o.a.createElement("h4",{className:"alert-warning alert"},"You are about to delete a schedule block",o.a.createElement("p",null,"You will not be able to undo this operation!")),o.a.createElement("p",null,"If this schedule affects existing appointments, you will have to assign those appointments to a different schedule first before you can delete this one.")),o.a.createElement(ee,{toggleAddScheduleModal:this.toggleAddScheduleModal,showAddScheduleModal:i,handleScheduleSubmit:this.handleScheduleSubmit,loadingSchedRes:d},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("label",{htmlFor:"medicalInstitution"},"Select Medical Institution")),o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("select",{name:"medicalInstitution",className:"custom-select"},o.a.createElement("option",{defaultValue:!0},"Medical Institution"),o.a.createElement("option",{value:"1"},"One"),o.a.createElement("option",{value:"2"},"Two"),o.a.createElement("option",{value:"3"},"Three"))))),o.a.createElement("h4",null,"Which days should this schedule be applied to?"),o.a.createElement("div",{className:"form-group"},P.map(function(t){return o.a.createElement("div",{className:"form-check form-check-inline",key:t.key},o.a.createElement("label",null,o.a.createElement(H,{name:t.name,checked:e.state.checkedItems.get(t.name),onChange:e.handleDayChange}),t.name))})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",{htmlFor:"startTime"},"Start Time",o.a.createElement("input",{onChange:this.handleStartTimeChange,type:"time",name:"startTime",required:!0}))),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",{htmlFor:"endTime"},"End Time",o.a.createElement("input",{onChange:this.handleEndTimeChange,type:"time",name:"endTime",required:!0})))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",{htmlFor:"startDate"},"Start Date",o.a.createElement("input",{onChange:this.handleChange,type:"date",name:"startDate",value:this.state.startDate,required:!0}))),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",{htmlFor:"endDate"},"End Date",o.a.createElement("input",{onChange:this.handleChange,type:"date",name:"endDate",value:this.state.endDate,required:!0})))))),o.a.createElement(D.a,{header:{left:"customPrevBtn,customNextBtn changeSchedBtn",center:"title",right:"month"},customButtons:{customPrevBtn:{text:"<",click:this.handlePrev},customNextBtn:{text:">",click:this.handleNext},changeSchedBtn:{text:"Add Schedule",click:function(){e.toggleAddScheduleModal()}}},defaultDate:r,navLinks:!0,editable:!1,eventLimit:!0,events:c,height:768,eventClick:function(e,t,n,a){var o=e.doctor_id,r=e.schedule_day_id,c=e.url;t.target.classList.contains("fas")&&u.handleDelete(o,r,c)},eventRender:function(e,t){var n=e.patient_count,a=e.days,o=k()(e.start._i).format("MMMM Do YYYY, h:mm a").split(",")[1].trim(),r=k()(e.end._i).format("MMMM Do YYYY, h:mm a").split(",")[1].trim();t[0].title="".concat(e.title," \n").concat(a,"\n").concat(o," to ").concat(r," \nPatients: ").concat(n);t[0].insertAdjacentHTML("beforeend",'\n                <a\n                  \n                  title="Delete this schedule"\n                  href="javascript:void(0)"\n                >\n                  <i style="color:#fff;" class="fas fa-trash mt-2 mr-2" />\n                </a>')}})))}}]),t}(a.Component);function ne(){var e=Object(m.a)(["\n  min-height: 100vh;\n  width: auto;\n  .fc-event {\n    background-color: #469a27 !important;\n    border: 1px solid #469a27 !important;\n    color: #fff !important;\n    padding: 0.2rem;\n  }\n  .fc-today {\n    background: #f9eeb6 !important;\n  }\n  .fc-day-grid-event {\n    .fc-content {\n      white-space: pre-wrap !important;\n    }\n  }\n"]);return ne=function(){return e},e}var ae=h.a.div(ne()),oe=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(ae,null,o.a.createElement(te,null))}}]),t}(a.Component);c.a.render(o.a.createElement(oe,null),document.getElementById("linecare-calendar-app"))}},[[182,1,2]]]);
//# sourceMappingURL=main.1cb96660.chunk.js.map