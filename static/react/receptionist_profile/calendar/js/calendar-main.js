(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{276:function(e,t,n){e.exports=n(677)},677:function(e,t,n){"use strict";n.r(t);n(277);var a=n(0),o=n.n(a),c=n(26),r=n.n(c),l=n(124),i=n(125),d=n(127),s=n(126),u=n(128),m=n(27),h=n(28),p=n(274),g=n(52),f=n(53),b=n.n(f),v=n(54),S=n.n(v),w=(n(500),n(25)),y=n.n(w),k=n(55),D=(n(509),n(89)),E=n(261),x=n(262),C=n.n(x),M=(n(527),"");function O(){var e=Object(m.a)(["\n  height: 100%;\n  width: 100%;\n  top: 0;\n  position: absolute;\n"]);return O=function(){return e},e}function N(){var e=Object(m.a)(["\n  padding: 2px 16px;\n  border-top: 1px solid rgba(0, 0, 0, 0.3);\n  color: #4a4a4a;\n  padding: 1rem 1rem;\n"]);return N=function(){return e},e}function Y(){var e=Object(m.a)(["\n  padding: 1rem 1rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  #profileList {\n    width: 100%;\n  }\n"]);return Y=function(){return e},e}function j(){var e=Object(m.a)(["\n  padding: 1rem 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\n  color: #4a4a4a;\n"]);return j=function(){return e},e}function _(){var e=Object(m.a)(["\n  position: relative;\n  background-color: #fefefe;\n  margin: auto;\n  padding: 0;\n  border: 1px solid #888;\n  width: 90%;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  -webkit-animation-name: animatetop;\n  -webkit-animation-duration: 0.4s;\n  animation-name: animatetop;\n  animation-duration: 0.4s;\n  /* Add Animation */\n  @-webkit-keyframes animatetop {\n    from {\n      top: -300px;\n      opacity: 0;\n    }\n    to {\n      top: 0;\n      opacity: 1;\n    }\n  }\n\n  @keyframes animatetop {\n    from {\n      top: -300px;\n      opacity: 0;\n    }\n    to {\n      top: 0;\n      opacity: 1;\n    }\n  }\n  @media (min-width: 500px) {\n    width: 60%;\n  }\n"]);return _=function(){return e},e}function I(){var e=Object(m.a)(["\n  display: ","; /* Hidden by default */\n  position: fixed; /* Stay in place */\n  z-index: 500; /* Sit on top */\n  padding-top: 100px; /* Location of the box */\n  left: 0;\n  top: 0;\n  width: 100%; /* Full width */\n  height: 100%; /* Full height */\n  overflow: auto; /* Enable scroll if needed */\n  background-color: rgb(0, 0, 0); /* Fallback color */\n  background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */\n  .close {\n    color: rgba(0, 0, 0, 1);\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: rgba(0, 0, 0, 0.4);\n    text-decoration: none;\n    cursor: pointer;\n  }\n  @media (min-width: 500px) {\n    padding-top: 200px; /* Location of the box */\n  }\n"]);return I=function(){return e},e}var T=h.a.div(I(),function(e){return e.modalOpen?"block":"none"}),B=h.a.div(_()),A=h.a.div(j()),F=h.a.div(Y()),R=h.a.div(N()),P=h.a.div(O()),H=function(e){var t=e.showModal,n=e.toggleModal,a=e.actualDelete,c=e.loadingDelRes;return o.a.createElement(T,{className:"modal",modalOpen:t},o.a.createElement(P,{onClick:n}),o.a.createElement(B,{className:"modal-content"},o.a.createElement(A,{className:"modal-header"},o.a.createElement("h6",null,"Are you sure you want to delete this schedule?"),o.a.createElement("span",{onClick:n,className:"close"},"\xd7")),o.a.createElement(F,{className:"modal-body"},e.children),o.a.createElement(R,{className:"modal-footer"},o.a.createElement("button",{disabled:c,onClick:a,className:"btn btn-danger",href:"#!"},"Delet","".concat(c?"ing":"e")),o.a.createElement("a",{onClick:n,href:"#!",className:"btn btn-secondary"},"Cancel"))))},L=[{name:"Monday",key:"checkBox1",label:"Monday"},{name:"Tuesday",key:"checkBox2",label:"Tuesday"},{name:"Wednesday",key:"checkBox3",label:"Wednesday"},{name:"Thursday",key:"checkBox4",label:"Thursday"},{name:"Friday",key:"checkBox5",label:"Friday"},{name:"Saturday",key:"checkBox6",label:"Saturday"},{name:"Sunday",key:"checkBox7",label:"Sunday"}],V=function(e){var t=e.type,n=void 0===t?"checkbox":t,a=e.name,c=e.checked,r=void 0!==c&&c,l=e.onChange;return o.a.createElement("input",{className:"form-check-input",type:n,name:a,checked:r,onChange:l})};function z(){var e=Object(m.a)(["\n  height: 100%;\n  width: 100%;\n  top: 0;\n  position: absolute;\n"]);return z=function(){return e},e}function W(){var e=Object(m.a)(["\n  padding: 2px 16px;\n  border-top: 1px solid rgba(0, 0, 0, 0.3);\n  color: #4a4a4a;\n  padding: 1rem 1rem;\n"]);return W=function(){return e},e}function J(){var e=Object(m.a)(["\n  padding: 1rem 1rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  #profileList {\n    width: 100%;\n  }\n"]);return J=function(){return e},e}function q(){var e=Object(m.a)(["\n  padding: 1rem 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\n  color: #4a4a4a;\n"]);return q=function(){return e},e}function X(){var e=Object(m.a)(["\n  position: relative;\n  background-color: #fefefe;\n  margin: auto;\n  padding: 0;\n  border: 1px solid #888;\n  width: 90%;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  -webkit-animation-name: animatetop;\n  -webkit-animation-duration: 0.4s;\n  animation-name: animatetop;\n  animation-duration: 0.4s;\n  /* Add Animation */\n  @-webkit-keyframes animatetop {\n    from {\n      top: -300px;\n      opacity: 0;\n    }\n    to {\n      top: 0;\n      opacity: 1;\n    }\n  }\n\n  @keyframes animatetop {\n    from {\n      top: -300px;\n      opacity: 0;\n    }\n    to {\n      top: 0;\n      opacity: 1;\n    }\n  }\n  @media (min-width: 500px) {\n    width: 60%;\n  }\n"]);return X=function(){return e},e}function G(){var e=Object(m.a)(["\n  display: ","; /* Hidden by default */\n  position: fixed; /* Stay in place */\n  z-index: 500; /* Sit on top */\n  padding-top: 100px; /* Location of the box */\n  left: 0;\n  top: 0;\n  width: 100%; /* Full width */\n  height: 100%; /* Full height */\n  overflow: auto; /* Enable scroll if needed */\n  background-color: rgb(0, 0, 0); /* Fallback color */\n  background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */\n  .close {\n    color: rgba(0, 0, 0, 1);\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: rgba(0, 0, 0, 0.4);\n    text-decoration: none;\n    cursor: pointer;\n  }\n  @media (min-width: 500px) {\n    padding-top: 100px; /* Location of the box */\n  }\n"]);return G=function(){return e},e}var K=h.a.div(G(),function(e){return e.modalOpen?"block":"none"}),Q=h.a.div(X()),U=h.a.div(q()),Z=h.a.div(J()),$=h.a.div(W()),ee=h.a.div(z()),te=function(e){var t=e.showAddScheduleModal,n=e.toggleAddScheduleModal,a=e.handleScheduleSubmit,c=e.loadingSchedRes;return o.a.createElement(K,{className:"modal",modalOpen:t},o.a.createElement(ee,{onClick:n}),o.a.createElement(Q,{className:"modal-content"},o.a.createElement(U,{className:"modal-header"},o.a.createElement("h6",null,"Create new schedule"),o.a.createElement("span",{onClick:n,className:"close"},"\xd7")),o.a.createElement(Z,{className:"modal-body"},e.children),o.a.createElement($,{className:"modal-footer"},o.a.createElement("button",{onClick:a,className:"btn btn-success",href:"#!",disabled:c},"Sav","".concat(c?"ing":"e")),o.a.createElement("a",{onClick:n,href:"#!",className:"btn btn-secondary"},"Cancel"))))};b.a.defaults.xsrfCookieName="csrftoken",b.a.defaults.xsrfHeaderName="X-CSRFToken";var ne=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={events:null,loading:!1,error:null,fullDate:null,monthViewSelected:!0,showModal:!1,doctorId:null,scheduleId:null,showAddScheduleModal:!1,checkedItems:new Map,startTime:new Date,endTime:new Date,startDate:y()(Date.now()).format("YYYY-MM-DD"),endDate:y()(Date.now()).format("YYYY-MM-DD"),loadingSchedRes:!1,loadingDelRes:!1,institutions:[],selectedInstitution:null},n.getDoctorConnections=function(){var e=Object(g.a)(n);b.a.get("".concat(M,"/doctor/api/v1/private/medical_institution_doctor/list?doctor_id=").concat(window.appContext.doctor_id)).then(function(t){var n=t.data;e.setState({institutions:n})}).catch(function(e){console.log(e)})},n.getEvents=function(){var e=new Date,t=e.getMonth()+1,a=e.getFullYear(),o=Object(g.a)(n);S.a.start(),n.setState({loading:!0}),b.a.get("".concat(M,"/doctor/api/v1/private/calendar/month?doctor_id=").concat(window.appContext.doctor_id,"&month=").concat(t,"&year=").concat(a)).then(function(e){var t=e.data;o.setState({events:t}),S.a.done(),o.setState({loading:!1})}).catch(function(e){}).then(function(){})},n.successCreatedSchedule=function(){return k.toast.success("Successfully created new Schedule!",{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.errorCreatedSchedule=function(e){return k.toast.error("".concat(e),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.successDeleteSchedule=function(){return k.toast.success("Successfully deleted!",{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.errorDeleteSchedule=function(e){return k.toast.error("".concat(e.data),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.validationError=function(e){return k.toast.error("".concat(e.detail||e),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.completeFormError=function(e){return k.toast.error("".concat(e),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},n.getCurrentDate=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,o=e.getFullYear();t<10&&(t="0"+t),a<10&&(a="0"+a);var c=e=a+"/"+t+"/"+o;n.setState({fullDate:c})},n.handlePrev=function(){var e=y()(n.state.fullDate).subtract(1,"months");n.setState({fullDate:e});var t=y()(n.state.fullDate).month()+1,a=y()(n.state.fullDate).year(),o=Object(g.a)(n);S.a.start(),n.setState({loading:!0}),b.a.get("".concat(M,"/doctor/api/v1/private/calendar/month?doctor_id=").concat(window.appContext.doctor_id,"&month=").concat(t,"&year=").concat(a)).then(function(e){var t=e.data;o.setState({events:t}),S.a.done(),o.setState({loading:!1})}).catch(function(e){var t=e.response.data;o.setState({error:t}),S.a.done()}).then(function(){})},n.handleNext=function(){var e=y()(n.state.fullDate).add(1,"months");n.setState({fullDate:e});var t=y()(n.state.fullDate).month()+1,a=y()(n.state.fullDate).year(),o=Object(g.a)(n);S.a.start(),n.setState({loading:!0}),b.a.get("".concat(M,"/doctor/api/v1/private/calendar/month?doctor_id=").concat(window.appContext.doctor_id,"&month=").concat(t,"&year=").concat(a)).then(function(e){var t=e.data;o.setState({events:t}),S.a.done(),o.setState({loading:!1})}).catch(function(e){var t=e.response.data;o.setState({error:t}),S.a.done()}).then(function(){})},n.handleDelete=function(e,t,a){console.log(e,t,a),n.setState({doctorId:e,scheduleId:t}),n.toggleModal()},n.toggleModal=function(){n.setState(function(e){return{showModal:!e.showModal}})},n.toggleAddScheduleModal=function(){n.setState(function(e){return{showAddScheduleModal:!e.showAddScheduleModal}})},n.actualDelete=function(){var e=Object(g.a)(n);n.setState({loadingDelRes:!0}),b.a.post("".concat(M,"/doctor/api/v1/private/doctor/schedule_day/delete"),{doctor_id:n.state.doctorId,schedule_day_id:n.state.scheduleId}).then(function(t){200===t.status?(e.successDeleteSchedule(),e.toggleModal(),e.getCurrentDate(),e.setState({loadingDelRes:!1}),e.getEvents()):console.log(t)}).catch(function(t){e.errorDeleteSchedule(t.response),e.toggleModal(),e.setState({loadingDelRes:!1})})},n.handleScheduleSubmit=function(){var e=n.state,t=e.startTime,a=e.endTime,o=e.startDate,c=e.endDate,r=e.selectedInstitution,l=[],i=!0,d=!1,s=void 0;try{for(var u,m=n.state.checkedItems.entries()[Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var h=u.value,f=Object(p.a)(h,2),v=f[0];f[1]&&l.push(v)}}catch(k){d=!0,s=k}finally{try{i||null==m.return||m.return()}finally{if(d)throw s}}var S=l.join("^"),w=Object(g.a)(n);if(r&&t&&a&&o&&c&&S)n.setState({loadingSchedRes:!0}),b.a.post("".concat(M,"/doctor/api/v1/private/doctor/schedule/create"),{start_time:y()(t).format("hh:mm a"),end_time:y()(a).format("hh:mm a"),start_date:y()(o).format("YYYY-MM-DD"),end_date:y()(c).format("YYYY-MM-DD"),doctor_id:parseInt(window.appContext.doctor_id),medical_institution_id:r,days:S}).then(function(e){201===e.status&&(w.successCreatedSchedule(),w.toggleAddScheduleModal(),w.getCurrentDate(),w.setState({checkedItems:new Map,startTime:new Date,endTime:new Date,startDate:y()(Date.now()).format("YYYY-MM-DD"),endDate:y()(Date.now()).format("YYYY-MM-DD"),selectedInstitution:null,loadingSchedRes:!1}),w.getEvents())}).catch(function(e){if(409===e.response.status){w.errorCreatedSchedule("Schedule conflict detected"),w.toggleAddScheduleModal(),w.setState({loadingSchedRes:!1})}else{var t=e.response.data;console.log({error:e}),w.validationError(t),w.toggleAddScheduleModal(),w.setState({loadingSchedRes:!1})}});else{var k="Please complete the form before submitting.";w.completeFormError("Please complete the form before submitting.")}},n.handleStartTimeChange=function(e){var t=e._d;n.setState({startTime:t})},n.handleEndTimeChange=function(e){var t=e._d;n.setState({endTime:t})},n.handleStartDateChange=function(e){var t=e._d;n.setState({startDate:t})},n.handleEndDateChange=function(e){var t=e._d;n.setState({endDate:t})},n.handleDayChange=function(e){var t=e.target.name,a=e.target.checked;n.setState(function(e){return{checkedItems:e.checkedItems.set(t,a)}})},n.handleInstitutionChange=function(e){"Medical Institution"===e.target.value?n.setState({selectedInstitution:null}):n.setState({selectedInstitution:e.target.value})},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getEvents(),this.getCurrentDate(),this.getDoctorConnections(),document.querySelector(".fc-view").classList.contains("fc-month-view")?this.setState({monthViewSelected:!0}):this.setState({monthViewSelected:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.error,c=t.fullDate,r=t.events,l=t.showModal,i=t.showAddScheduleModal,d=t.loadingSchedRes,s=t.loadingDelRes,u=t.institutions,m=t.startTime,h=t.endTime,p=t.startDate,g=t.endDate,f=u.map(function(e){return o.a.createElement("option",{key:e.medical_institution.id,value:e.medical_institution.id},e.medical_institution.name)}),b=this;return o.a.createElement("div",null,o.a.createElement(k.ToastContainer,{transition:k.Slide,position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!1,pauseOnHover:!1}),a?o.a.createElement("h6",{className:"text-center"},o.a.createElement("em",null,a)):n?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(H,{showModal:l,toggleModal:this.toggleModal,actualDelete:this.actualDelete,loadingDelRes:s},o.a.createElement("h4",{className:"alert-warning alert"},"You are about to delete a schedule block",o.a.createElement("p",null,"You will not be able to undo this operation!")),o.a.createElement("p",null,"If this schedule affects existing appointments, you will have to assign those appointments to a different schedule first before you can delete this one.")),o.a.createElement(te,{toggleAddScheduleModal:this.toggleAddScheduleModal,showAddScheduleModal:i,handleScheduleSubmit:this.handleScheduleSubmit,loadingSchedRes:d},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("label",{htmlFor:"medicalInstitution"},"Select Medical Institution")),o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("select",{name:"medicalInstitution",className:"custom-select",onChange:this.handleInstitutionChange},o.a.createElement("option",{defaultValue:!0},"Medical Institution"),f)))),o.a.createElement("label",null,"Which days should this schedule be applied to?"),o.a.createElement("div",{className:"form-group"},L.map(function(t){return o.a.createElement("div",{className:"form-check form-check-inline",key:t.key},o.a.createElement("label",null,o.a.createElement(V,{name:t.name,checked:e.state.checkedItems.get(t.name),onChange:e.handleDayChange}),t.name))})),o.a.createElement(D.b,{utils:E.a},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",{htmlFor:"startTime"},"Start Time"),o.a.createElement(D.c,{value:m,onChange:this.handleStartTimeChange})),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",{htmlFor:"endTime"},"End Time"),o.a.createElement(D.c,{value:h,onChange:this.handleEndTimeChange}))),o.a.createElement("div",{className:"row mt-4"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",{htmlFor:"startDate"},"Start Date"),o.a.createElement(D.a,{value:p,onChange:this.handleStartDateChange})),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement("label",{htmlFor:"endDate"},"End Date"),o.a.createElement(D.a,{value:g,onChange:this.handleEndDateChange})))))),o.a.createElement(C.a,{header:{left:"customPrevBtn,customNextBtn changeSchedBtn",center:"title",right:"month"},customButtons:{customPrevBtn:{text:"<",click:this.handlePrev},customNextBtn:{text:">",click:this.handleNext},changeSchedBtn:{text:"Add Schedule",click:function(){e.toggleAddScheduleModal()}}},defaultDate:c,navLinks:!0,editable:!1,eventLimit:!0,events:r,height:768,eventClick:function(e,t,n,a){var o=e.doctor_id,c=e.schedule_day_id,r=e.url;t.target.classList.contains("fas")&&b.handleDelete(o,c,r)},eventRender:function(e,t){var n=e.patient_count,a=e.days,o=y()(e.start._i).format("MMMM Do YYYY, h:mm a").split(",")[1].trim(),c=y()(e.end._i).format("MMMM Do YYYY, h:mm a").split(",")[1].trim();t[0].title="".concat(e.title," \n").concat(a,"\n").concat(o," to ").concat(c," \nPatients: ").concat(n);t[0].insertAdjacentHTML("beforeend",'\n                <a\n                  \n                  title="Delete this schedule"\n                  href="javascript:void(0)"\n                >\n                  <i style="color:#fff;" class="fas fa-trash mt-2 mr-2" />\n                </a>')}})))}}]),t}(a.Component);function ae(){var e=Object(m.a)(["\n  min-height: 100vh;\n  width: auto;\n  .fc-event {\n    background-color: #469a27 !important;\n    border: 1px solid #469a27 !important;\n    color: #fff !important;\n    padding: 0.2rem;\n  }\n  .fc-today {\n    background: #f9eeb6 !important;\n  }\n  .fc-day-grid-event {\n    .fc-content {\n      white-space: pre-wrap !important;\n    }\n  }\n"]);return ae=function(){return e},e}var oe=h.a.div(ae()),ce=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(oe,null,o.a.createElement(ne,null))}}]),t}(a.Component);r.a.render(o.a.createElement(ce,null),document.getElementById("linecare-calendar-app"))}},[[276,1,2]]]);
//# sourceMappingURL=main.04314485.chunk.js.map