(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,a){e.exports=a(409)},407:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);a(181);var n=a(1),o=a.n(n),r=a(92),c=a.n(r),l=a(64),s=a(65),i=a(70),d=a(66),u=a(71),h=a(20),m=a.n(h),g=function(e){var t=e.handleChange,a=e.showFiltersFn,n=e.showFilters;return o.a.createElement("div",{className:"front-page__container"},o.a.createElement("div",{className:"front-page__header"},o.a.createElement("h1",null,"Your Healthcare ",o.a.createElement("br",null),"Connection")),o.a.createElement("div",{className:"front-page__search-label"},"Search and book"),o.a.createElement("div",{className:"front-page__search"},o.a.createElement("input",{onChange:t,name:"doctor_search",id:"doctor_search",type:"text"}),o.a.createElement("i",{className:"fas fa-search"})),n?o.a.createElement("a",{onClick:a,href:"javascript:void(0)"},"Hide filters"):o.a.createElement("a",{onClick:a,href:"javascript:void(0)"},"More filters"))},p=a(412),v=a(413),f=a(411),E=a(414),C="";m.a.defaults.xsrfCookieName="csrftoken",m.a.defaults.xsrfHeaderName="X-CSRFToken";var _=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getRegions("".concat(C,"/location/api/v1/regions"))}},{key:"render",value:function(){var e=this.props,t=e.regions,a=e.province,n=e.cities,r=e.error,c=t.map(function(e){var t=e.name,a=e.id;return o.a.createElement("option",{key:a,value:a},t)}),l=a.map(function(e){var t=e.name,a=e.id;return o.a.createElement("option",{key:a,value:a},t)}),s=n.map(function(e){var t=e.name,a=e.id;return o.a.createElement("option",{key:a,value:a},t)});return o.a.createElement("div",{className:"front-page__filters"},o.a.createElement("div",{className:"front-page__option"},r||o.a.createElement("label",{htmlFor:"region"}," ","Select Region: ",o.a.createElement("br",null),o.a.createElement("select",{onChange:this.props.handleChangeRegion,name:"region",id:"region"},o.a.createElement("option",{value:"selected"},"\u2014"),c||"Loading..."))),o.a.createElement("div",{className:"front-page__option"},r||o.a.createElement("label",{htmlFor:"province"},"Select Province: ",o.a.createElement("br",null),o.a.createElement("select",{onChange:this.props.handleChangeProvince,name:"province",id:"province"},o.a.createElement("option",{value:"selected"},"\u2014"),l||"Loading..."))),o.a.createElement("div",{className:"front-page__option"},r||o.a.createElement("label",{htmlFor:"city"},"Select City: ",o.a.createElement("br",null),o.a.createElement("select",{onChange:this.props.handleChangeCity,name:"city",id:"city"},o.a.createElement("option",{value:"selected"},"\u2014"),s||"Loading..."))),o.a.createElement("div",{className:"front-page__option"},o.a.createElement("label",{htmlFor:"specializations"},"Specializations: ",o.a.createElement("br",null),o.a.createElement("select",{name:"specializations",id:"specializations"},o.a.createElement("option",{defaultValue:"selected"},"\u2014")))))}}]),t}(n.Component),y=function(e){return e.children};m.a.defaults.xsrfCookieName="csrftoken",m.a.defaults.xsrfHeaderName="X-CSRFToken";var w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={zoom:15,userLocation:{lat:32,lng:32},loading:!0,doctorDetails:null,showDetails:!1,doctorSchedules:null,newCoords:null,newName:null},a.showDoctorDetails=function(e){a.getDoctorDetails("".concat(C,"/doctor/api/v1/public/profile/detail?id=").concat(e))},a.getDoctorDetails=function(e){m.a.get(e).then(function(e){var t=e.data,n=t.schedule_today;a.setState({doctorDetails:t,doctorSchedules:n,showDetails:!0})}).catch(function(e){a.setState({error:e})})},a.getInstitutionCoords=function(e,t){var n=[e.lat,e.lon];n?a.setState({newCoords:n,newName:t}):a.setState({newCoords:null,newName:null})},a.closeDoctorDetails=function(){a.setState({doctorDetails:null,doctorSchedules:null,showDetails:!1})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){var a=t.coords,n=a.latitude,o=a.longitude;e.setState({userLocation:{lat:n,lng:o},loading:!1})},function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.results,n=t.showResults,r=t.getRegions,c=t.handleChangeRegion,l=t.handleChangeProvince,s=t.handleChangeCity,i=t.regions,d=t.province,u=t.cities,h=t.showFilters,m=t.error,g=this.state,C=g.loading,w=g.userLocation,N=g.doctorDetails,S=g.showDetails,D=g.doctorSchedules,R=g.newCoords,b=g.newName,k=[w.lat,w.lng],F=a.map(function(t){var a=t.name,n=t.id,r=t.medical_institutions.map(function(e,t){return o.a.createElement("em",{key:t},"".concat(e,","))});return o.a.createElement("div",{className:"result",key:n},o.a.createElement("div",{className:"info"},o.a.createElement("p",null,a),o.a.createElement("p",null,r),o.a.createElement("a",{onClick:function(){return e.showDoctorDetails(n)},href:"javascript:void(0)"},"More Details")))});return o.a.createElement("div",{className:"front-page__map"},h?o.a.createElement(_,{getRegions:r,handleChangeRegion:c,handleChangeProvince:l,handleChangeCity:s,regions:i,province:d,cities:u,error:m}):null,o.a.createElement(p.a,{id:"front-page-map",center:R||k,zoom:R?18:this.state.zoom},o.a.createElement(v.a,{attribution:'\xa9 <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),C?"Loading...":o.a.createElement(y,null,o.a.createElement(f.a,{position:k},o.a.createElement(E.a,null,"You are here.")),R?o.a.createElement(f.a,{position:R},o.a.createElement(E.a,null,"".concat(b," is here!"))):null),n?0===F.length?o.a.createElement("div",{className:"front-page__search-results",style:{display:"flex"}},o.a.createElement("em",null,"No results found")):o.a.createElement("div",{className:"front-page__search-results",style:{display:"flex"}},F):o.a.createElement("div",{className:"front-page__search-results",style:{display:"none"}}),S?o.a.createElement("div",{className:"front-page__doctor-details"},o.a.createElement("a",{className:"closeBtn",href:"javascript:void(0)",onClick:this.closeDoctorDetails},"\xd7"," "),o.a.createElement("div",{className:"doctor-profile"},o.a.createElement("img",{src:N.profile_photo.photo,alt:N.profile_photo.photo}),o.a.createElement("h6",null,N.full_name)),o.a.createElement("div",{className:"doctor-schedules"},null===N.schedule_today?o.a.createElement("em",null,N.first_name," has no schedule today"):o.a.createElement(y,null,o.a.createElement("span",null,N.first_name," has a schedule today in"," ",D.map(function(t,a){return o.a.createElement("a",{href:"javascript:void(0)"},o.a.createElement("p",{onClick:function(){return e.getInstitutionCoords(t.medical_institution.coords,t.medical_institution.name)},key:a},t.medical_institution.name))})),D.map(function(e,t){return o.a.createElement(y,{key:t},o.a.createElement("p",null,"From ".concat(e.schedule.start_time.format_12," to ").concat(e.schedule.end_time.format_12)),o.a.createElement("p",null,"(".concat(e.schedule.start_date.day_name,", ").concat(e.schedule.start_date.month_name," ").concat(e.schedule.start_date.day,", ").concat(e.schedule.start_date.year," to ").concat(e.schedule.end_date.day_name,", ").concat(e.schedule.end_date.month_name," ").concat(e.schedule.end_date.day,", ").concat(e.schedule.end_date.year,")")))})))):null))}}]),t}(n.Component);m.a.defaults.xsrfCookieName="csrftoken",m.a.defaults.xsrfHeaderName="X-CSRFToken";var N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={doctors:[],showResults:!1,showFilters:!1,regions:[],province:[],cities:[],error:null,selectedReg:null,selectedProv:null,selectedCity:null},a.handleChange=function(e){var t=e.target.value,n=a.state,o=n.selectedReg,r=n.selectedProv,c=n.selectedCity;if(""===t&&a.setState({showResults:!1}),t.length>=3)if(o)if(r)if(c){var l=encodeURIComponent("".concat(t," AND ").concat(o," AND ").concat(r," AND ").concat(c).trim());a.gerDoctors("".concat(C,"/search/api/v1/doctors?q=").concat(l)),a.setState({showResults:!0})}else{var s=encodeURIComponent("".concat(t," AND ").concat(o," AND ").concat(r).trim());a.gerDoctors("".concat(C,"/search/api/v1/doctors?q=").concat(s)),a.setState({showResults:!0})}else{var i=encodeURIComponent("".concat(t," AND ").concat(o).trim());a.gerDoctors("".concat(C,"/search/api/v1/doctors?q=").concat(i)),a.setState({showResults:!0})}else a.gerDoctors("".concat(C,"/search/api/v1/doctors?q=").concat(t)),a.setState({showResults:!0})},a.gerDoctors=function(e){console.log(e),m.a.get(e).then(function(e){var t=e.data;a.setState({doctors:t})}).catch(function(e){a.setState({error:e})})},a.getRegions=function(e){m.a.get(e).then(function(e){var t=e.data.results;a.setState({regions:t})}).catch(function(e){a.setState({error:e})})},a.handleChangeRegion=function(e){if("selected"!==e.target.value){var t=e.target.value,n=e.nativeEvent.target.selectedIndex,o=e.nativeEvent.target[n].text.replace(/[^0-9a-z]/gi," ");a.setState({cities:[],doctors:[]}),m.a.get("".concat(C,"/location/api/v1/provinces_of_region?region=").concat(t)).then(function(e){var t=e.data.results;a.setState({province:t,selectedReg:o})}).catch(function(e){a.setState({error:e})})}},a.handleChangeProvince=function(e){if("selected"!==e.target.value){var t=e.target.value,n=e.nativeEvent.target.selectedIndex,o=e.nativeEvent.target[n].text.replace(/[^0-9a-z]/gi," ");m.a.get("".concat(C,"/location/api/v1/cities_of_province?province=").concat(t)).then(function(e){var t=e.data.results;a.setState({cities:t,selectedProv:o})}).catch(function(e){a.setState({error:e})})}},a.handleChangeCity=function(e){if("selected"!==e.target.value){var t=e.nativeEvent.target.selectedIndex,n=e.nativeEvent.target[t].text.replace(/[^0-9a-z]/gi," ");a.setState({selectedCity:n})}},a.showFiltersFn=function(){a.setState(function(e){return{showFilters:!e.showFilters}}),!1===a.state.showFilters&&a.setState({selectedReg:null,selectedProv:null,selectedCity:null})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.doctors,a=e.showResults,n=e.showFilters,r=e.regions,c=e.province,l=e.cities,s=e.error;return o.a.createElement(y,null,o.a.createElement(g,{showFiltersFn:this.showFiltersFn,handleChange:this.handleChange,showFilters:n}),o.a.createElement(w,{getRegions:this.getRegions,handleChangeRegion:this.handleChangeRegion,handleChangeProvince:this.handleChangeProvince,handleChangeCity:this.handleChangeCity,showResults:a,showFilters:n,results:t,regions:r,province:c,cities:l,error:s}))}}]),t}(n.Component);a(407);c.a.render(o.a.createElement(N,null),document.getElementById("linecare-front-page"))}},[[180,2,1]]]);
//# sourceMappingURL=main.e03e1adc.chunk.js.map